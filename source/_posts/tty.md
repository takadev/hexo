---
title: ttyとptsについて
date: 2016-12-11 00:00:00
tags:
- "tty"
- "pts"
- "Docker"
category: コマンド
---
## ttyとptsがわからなかったので調べてみた
ttyとptsについて良くわかってなかったので調べてみました。自分メモです。
<!-- More -->

## screenコマンド
ttyとptsの前にscreenコマンドについてです。

そもそもttyとptsが何なのか調べたのは、このscreenコマンドでDocker for Mac のxhive環境へのログインする必要があり、その前提知識としてtty、ptsどんなものなのか知る必要があったからです。

で、まずscreenコマンドはというと、
screenコマンドは１つのターミナル上で、仮想的に複数の端末を同時にオープンして作業できるようにするコマンドです。仮想端末が開かれた状態を保ったままターミナルをログアウトできたり、後から再度ログインして、screenを呼び出すことで仮想端末の状態に復帰することができます。
例えば処理にすごく時間のかかる作業がある場合に仮想端末上でそれを行わせてから元のターミナルで他の作業をするなどに使えるようです。

結構便利なコマンドですね。全然知りませんでした...
このscreenコマンドでDockerのttyを指定できるようです。

## ttyコマンド
そしてそもそもttyとかptsってなんぞや？ってとこですが、まずttyコマンドというコマンドがあります。
ttyコマンドは標準入出力となっている端末デバイスの名前を表示するコマンドです。
テレタイプライターでttyだそうです。ttyコマンドはあまり聞きませんが、よくpsコマンドでプロセス確認する時にttyって見かけますよね。こんな感じで。

```
$ ps aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
root     21944  0.0  0.0   4064   436 tty1     Ss+  Aug23   0:00 /sbin/mingetty /dev/tty1
root     23504  0.0  0.0   4080   500 ttyS0    Ss+  Aug23   0:00 /sbin/agetty /dev/ttyS0 115200 vt100-nav
...
```

tty自体はデバイスファイルとしても存在していて、/dev/ttyにあります。
/dev/ttyは物理的な標準出力の端末なので、こんなこともできます。

```
$ echo "Hello world" > /dev/tty
Hello world
```

/dev/ttyへ文字をリダイレクトするとスクリーンにその文字が出力されます。標準出力に文字を送ったので当たり前といば当たり前ですね。
ということでttyは物理できな標準出力ってことですね。

ちなみにptsはsshなどで繋いだ場合の仮想端末のことで、
sshで繋いだサーバ上でscreenコマンドで複数の仮想端末を立ち上げるとこんな風になります。

```
$ tty
/dev/pts/0
$ screen
$ tty
/dev/pts/1
```

screenコマンドで別の仮想端末が立ち上がったことがttyコマンドで確認できますね。
Dockerで起動中のコンテナにアタッチした時にscreenコマンドが使えると便利そうですね。

終わり。