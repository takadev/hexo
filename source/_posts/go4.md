---
title: Glideを使ってみた
date: 2016-12-15 00:00:00
tags:
- "Go"
- "Glide"
category: Go
---
## Glideについて
今回はGoのパッケージマネージャーのGlideを使ってみました。
<!-- More -->

## はじめに
環境はmacです。GlideはGo1.5以降でないと使用できません。
GlideはGo1.5から追加されたVendoring機能を使用しているからです。
Goの環境は[依然の記事](http://devlog.site/Go/go1/)で作成しています。

## Glide入れてみた
Goの標準には**go get**という依存パッケージをダウンロードしてくれる便利なコマンドがあります。
ただし、**go get**はバージョンを指定することができないという難点があります。
なので今回はGlideを入れてみました。ちなみにグライド？って読むと思います。

まずはインストールです。Homebrewで一発です。

```
brew update
brew install glide
```

インストールできたか確認してみます。

```
glide -v
glide version 0.12.3
```

無事にインストール出来てますね。
これで終わりです。簡単ですね。

## バージョン定義ファイルの作成

インストールができたら次にバージョン定義ファイルの作成を行います。
以下のコマンドで作成ができます。

```
glide init
```

コマンドが終了するとインポートしている外部ライブラリの一覧をglide.yamlファイルに書き出してくれます。

glide.yamlファイルの中身はこんな感じでそれぞれのパッケージとバージョンが記載されています。

```
package: .
import:
- package: github.com/cpuguy83/go-md2man
  version: ^1.0.6
  subpackages:
  - md2man
...
```

## パッケージを取得
定義ファイルの作成ができたら、定義に従ってパッケージを更新します。
これでバージョンが固定されます。

```
glide install
```

実行後はvendorディレクトリが作成され、依存パッケージがダウンロード・展開されます。
また、glide.lockというファイルも作られ、このファイルによってバージョンが固定されます。

## パッケージの追加
パッケージの追加には**go get**の代わりに以下のコマンドを使用します。

```
glide get github.com/xxx/xxxx
```

このコマンドを使用すると自動的にglide.yamlの更新やvendorディレクトリへの展開を行ってくれます。

## パッケージの更新
パッケージにパッチが当たってバグの修正などのアップデートが行われた場合に、パッケージを更新したいことがあるかと思います。
その場合には以下のコマンドを叩くだけでアップデートが行えます。

```
glide up
```

このコマンドはglide.yamlにおいてバージョンが指定されていないパッケージのみ、最新のバージョンにアップデートしてくれます。
glide.yamlにバージョンを指定しているパッケージは特にアップデートは行いません。

## その他
リスト形式で依存パッケージを表示してくれる便利コマンドやツリー形式に表示してくれるものあります。


```
glide list
```

```
glide tree
```

終わり。